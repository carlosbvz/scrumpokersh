(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{46:function(e,t,a){e.exports=a(715)},51:function(e,t,a){},52:function(e,t,a){},55:function(e,t,a){},684:function(e,t,a){},687:function(e,t,a){},707:function(e,t,a){},708:function(e,t,a){},715:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),s=a(35),l=a.n(s),i=(a(51),a(9)),o=a(10),c=a(12),u=a(11),m=a(13),h=a(43),d=a(18),p=a(717),y=a(718),E=a(721),g=(a(52),function(e){function t(){var e,a;Object(i.a)(this,t);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(n)))).state={userName:null},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"uuidv4",value:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)})}},{key:"componentDidMount",value:function(){localStorage.getItem("pockerUserName")&&this.props.history.push("/scrum-pocker")}},{key:"startGame",value:function(e){if(e){var t=this.uuidv4();localStorage.setItem("pockerUserName",e),localStorage.setItem("pockerUserId",t),window.socket.emit("add player",{name:e,id:t}),this.props.history.push("/scrum-pocker")}}},{key:"onSubmit",value:function(e){e.preventDefault()}},{key:"render",value:function(){var e=this;return n.a.createElement(y.a,{className:"login-form",onSubmit:this.onSubmit},n.a.createElement(y.a.Group,{controlId:"fromLogin"},n.a.createElement(y.a.Control,{type:"text",placeholder:"What's your name",onChange:function(t){return e.setState({userName:t.target.value})},required:!0})),n.a.createElement(E.a,{block:!0,variant:"primary",type:"submit",onClick:function(){return e.startGame(e.state.userName)}},"Let's play!"))}}]),t}(n.a.Component)),v=a(7),f=a(716),k=a(37),C=(a(55),function(e){function t(){return Object(i.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(o.a)(t,[{key:"updateUserName",value:function(e){this.props.handleUserNameChange(e)}},{key:"restoreUserName",value:function(e){e||this.props.handleUserNameChange(localStorage.getItem("pockerUserName"))}},{key:"render",value:function(){var e=this;return n.a.createElement("div",{className:"header"},n.a.createElement("h1",null,"ScrumPockersh"),this.props.isAdmin?null:n.a.createElement(y.a,null,n.a.createElement(y.a.Group,{controlId:"formUserName"},n.a.createElement(y.a.Control,{className:"input-trans",as:"textarea",rows:"1",value:this.props.userName||"",onChange:function(t){return e.updateUserName(t.target.value)},onBlur:function(t){return e.restoreUserName(t.target.value)}}))))}}]),t}(n.a.Component)),b=a(719),S=a(38),x=(a(684),function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).onDeletePlayer=a.onDeletePlayer.bind(Object(v.a)(a)),a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"getAdminControllers",value:function(e){var t=this;return n.a.createElement(S.FaTrashO,{color:"red",onClick:function(a){return t.onDeletePlayer(e)}})}},{key:"onDeletePlayer",value:function(e){this.props.deletePlayer(e)}},{key:"render",value:function(){var e=this;return n.a.createElement("div",{className:"players-panel"},n.a.createElement(b.a,null,n.a.createElement(b.a.Item,null,n.a.createElement("h3",null,"Players:")),this.props.players.map(function(t,a){return n.a.createElement(b.a.Item,{key:a,variant:t.score?"success":""},n.a.createElement("span",null,e.props.isAdmin?e.getAdminControllers(t.id):null," ",t.name),n.a.createElement("span",null,e.props.shouldDisplayEstimates?t.score?t.score:":(":null," "))})))}}]),t}(n.a.Component)),O=a(720),j=(a(687),function(e){function t(){return Object(i.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(o.a)(t,[{key:"onCardClick",value:function(e,t){this.props.handleCardClick(e,t)}},{key:"render",value:function(){var e=this;return n.a.createElement(O.a,{bg:this.props.isCardSelected?"primary":"",text:this.props.isCardSelected?"white":"",className:"game-card--external",onClick:function(t){return e.onCardClick(e.props.index,e.props.number)}},n.a.createElement("p",{className:"game-card--up"},this.props.number),n.a.createElement(O.a.Body,null,n.a.createElement(O.a,{bg:this.props.isCardSelected?"primary":"",className:"game-card--internal"},n.a.createElement(O.a.Body,null,n.a.createElement(O.a.Text,null,this.props.number)))),n.a.createElement("p",{className:"game-card--down"},this.props.number))}}]),t}(n.a.Component)),N=a(20),U=a.n(N),w=(a(707),function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={isAdmin:a.props.isAdmin,userName:null,userId:null,currentUserStory:null,players:[],cardsNumbers:["0","1/2","1","2","3","5","8","13","21","20","40"],selectedCardIndex:[],userStoryFieldHeight:null,shouldDisplayEstimates:!1,isGetPlayersIntervalSet:!1,isClearingEstimates:!1},a.onUsernameChange=a.onUsernameChange.bind(Object(v.a)(a)),a.setPlayers=a.setPlayers.bind(Object(v.a)(a)),a.onCardClick=a.onCardClick.bind(Object(v.a)(a)),a.toggleEstimates=a.toggleEstimates.bind(Object(v.a)(a)),a.getPlayersFromDB=a.getPlayersFromDB.bind(Object(v.a)(a)),a.logout=a.logout.bind(Object(v.a)(a)),a.clearEstimates=a.clearEstimates.bind(Object(v.a)(a)),a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=localStorage.getItem("pockerUserName"),a=localStorage.getItem("pockerUserId");t||this.state.isAdmin?(this.setState({userName:t,userId:a}),this.setPlayers(),this.state.isAdmin||window.socket.emit("add player",{name:t,id:a,score:null}),window.socket.on("user story from server",function(t){e.setState({currentUserStory:t})}),window.socket.on("clear current estimate",function(){e.onCardClick()})):this.props.history.push("/")}},{key:"componentWillUnmount",value:function(){this.state.isGetPlayersIntervalSet&&(clearInterval(this.state.isGetPlayersIntervalSet),this.setState({isGetPlayersIntervalSet:null}))}},{key:"setPlayers",value:function(){if(this.getPlayersFromDB(),!this.state.isGetPlayersIntervalSet){var e=setInterval(this.getPlayersFromDB,1e3);this.setState({isGetPlayersIntervalSet:e})}}},{key:"getPlayersFromDB",value:function(){var e=this;U.a.get("/api/get/players").then(function(t){console.log(t.data.data),e.setState({players:JSON.parse(t.data.data)})})}},{key:"onUsernameChange",value:function(e){this.setState({userName:e}),e&&localStorage.setItem("pockerUserName",e),U.a.post("/api/update/player",{id:this.state.userId,name:e})}},{key:"onCardClick",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=[];a[e]=!0,this.setState({selectedCardIndex:a}),U.a.post("/api/update/player",{id:this.state.userId,name:this.state.userName,score:t})}},{key:"logout",value:function(){localStorage.clear(),this.props.history.push("/")}},{key:"onDeletePlayer",value:function(e){U.a.post("/api/delete/player",{id:e})}},{key:"getCards",value:function(){var e=this;return this.state.cardsNumbers.map(function(t,a){return n.a.createElement(j,{key:a,number:t,index:a,isCardSelected:e.state.selectedCardIndex[a],handleCardClick:e.onCardClick})})}},{key:"onUserStoryChange",value:function(e){this.setState({userStoryFieldHeight:e.target.scrollHeight}),this.setState({currentUserStory:e.target.value}),window.socket.emit("send user story",e.target.value)}},{key:"toggleEstimates",value:function(){this.setState({shouldDisplayEstimates:!this.state.shouldDisplayEstimates})}},{key:"clearEstimates",value:function(){var e=this;console.log(this.state.isClearingEstimates),this.state.isClearingEstimates?(U.a.post("/api/delete/estimates",{id:[]}),this.setState({isClearingEstimates:!1}),window.socket.emit("clear estimates")):(this.setState({isClearingEstimates:!0}),setTimeout(function(){e.setState({isClearingEstimates:!1})},4e3))}},{key:"getMainPanel",value:function(){var e=this;return this.state.isAdmin?n.a.createElement("div",null,n.a.createElement(f.a,null,n.a.createElement(k.a,{xs:8},n.a.createElement(f.a,null,n.a.createElement(k.a,{className:""},n.a.createElement("h3",null,"User Story:"),n.a.createElement(y.a,null,n.a.createElement(y.a.Group,{controlId:"formCurrentUserStory"},n.a.createElement(y.a.Control,{style:{height:this.state.userStoryFieldHeight},as:"textarea",rows:"3",className:"input-trans",placeholder:"Paste here your User Story",value:this.state.currentUserStory||"",onChange:function(t){return e.onUserStoryChange(t)}})))))),n.a.createElement(k.a,{xs:4},n.a.createElement(f.a,null,n.a.createElement(k.a,{xs:6},this.state.shouldDisplayEstimates?n.a.createElement(E.a,{block:!0,variant:"primary",onClick:this.toggleEstimates},"Hide Estimates"):n.a.createElement(E.a,{block:!0,variant:"primary",onClick:this.toggleEstimates},"Show Estimates")),n.a.createElement(k.a,{xs:6},n.a.createElement(E.a,{block:!0,variant:"danger",onClick:this.clearEstimates},this.state.isClearingEstimates?"Are you Sure?":"Clear"))),n.a.createElement("br",null),n.a.createElement(x,{players:this.state.players,isAdmin:this.state.isAdmin,shouldDisplayEstimates:this.state.shouldDisplayEstimates,deletePlayer:this.onDeletePlayer})))):n.a.createElement(f.a,null,n.a.createElement(k.a,{xs:8},n.a.createElement(f.a,null,n.a.createElement(k.a,null,n.a.createElement("h3",null,"User Story:"),n.a.createElement("p",null,this.state.currentUserStory||"No user Story added yet"))),n.a.createElement(f.a,null,n.a.createElement(k.a,null,n.a.createElement(E.a,{onClick:this.onCardClick},"Clear"))),n.a.createElement(f.a,null,n.a.createElement(k.a,{className:"cards-section"},this.getCards()))),n.a.createElement(k.a,{xs:4},n.a.createElement(x,{players:this.state.players})))}},{key:"render",value:function(){return n.a.createElement("div",null,n.a.createElement(C,{handleUserNameChange:this.onUsernameChange,isAdmin:this.state.isAdmin,userName:this.state.userName}),this.getMainPanel())}}]),t}(n.a.Component)),I=(a(708),function(e){function t(){return Object(i.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return n.a.createElement(h.a,null,n.a.createElement(p.a,{fluid:!0},n.a.createElement(d.a,{exact:!0,path:"/",component:g}),n.a.createElement(d.a,{exact:!0,path:"/scrum-pocker",component:w}),n.a.createElement(d.a,{path:"/scrum-pocker/admin",render:function(e){return n.a.createElement(w,Object.assign({},e,{isAdmin:!0}))}})))}}]),t}(n.a.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(n.a.createElement(I,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[46,1,2]]]);
//# sourceMappingURL=main.29b5cf83.chunk.js.map